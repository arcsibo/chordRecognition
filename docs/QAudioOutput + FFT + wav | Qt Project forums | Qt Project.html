<!doctype html>
<html lang="en">
<head>
<link href="https://plus.google.com/104580575722059274792" rel="publisher" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="google-site-verification" content="RbscOuyq0e0-Rb8pae9es_nUmCbYcsMKizYkTzb38i8" />
<title>QAudioOutput + FFT + wav | Qt Project forums | Qt Project</title>
<meta name='keywords' content='qml, qt quick, howto, qt creator, windows, tutorial, wiki, mobility api, linux, example, qt webkit, qmake, forum, mobile, embedded, pyside, getting started, mac os, qt project, cross-platform, documentation' />
<meta name='description' content='Forum, Wiki, FAQ, Groups - the official Qt community site. Here you can get started with Qt, read tutorials, find solutions to your challenges and get up to date on the latest developments.' />
<!-- generated by seo_lite -->        

<script type="text/javascript"> 
<!--

function navHover(which)
{					
	if (document.getElementById(which.id))
	{
		cur = document.getElementById(which.id).className;
		
		if (cur == 'buttonLarge')
		{
			document.getElementById(which.id).className = 'buttonLargeHover'
		}
		else if (cur == 'buttonSmall')
		{
			document.getElementById(which.id).className = 'buttonSmallHover'
		}
	}
}

function navReset(which)
{					
	if (document.getElementById(which.id))
	{
		cur = document.getElementById(which.id).className;
		
		if (cur == 'buttonLargeHover')
		{
			document.getElementById(which.id).className = 'buttonLarge'
		}
		else if (cur == 'buttonSmallHover')
		{
			document.getElementById(which.id).className = 'buttonSmall'
		}
	}
}


function navJump(where)
{
	window.location=where;
}
-->
</script>


<style type='text/css'>

</style>

<meta name="robots" content="INDEX,FOLLOW" />
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link rel="canonical" href="https://qt-project.org/forums/viewthread/52452" />
<link rel="stylesheet" type="text/css" href="/static/styles/style-min0512201215101354716658.css" media="all" />
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="/static/styles/cdk_style_ie6-min0512201215101354716658.css"/><![endif]-->
<!--[if IE 7]><link rel="stylesheet" type="text/css" href="/static/styles/cdk_style_ie7-min0512201215101354716658.css" /><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="/static/styles/ie7-min0512201215101354716658.css" media="all" /><![endif]-->
<!--[if IE]><link rel="stylesheet" type="text/css" href="/static/styles/ie-min0512201215101354716658.css" media="all" /><![endif]--><link rel="stylesheet" type="text/css" href="/static/gcse/default.css" media="all" />
<!-- <link 
href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" 
rel="stylesheet" type="text/css" /> -->
<link href="https://qt-project.org/?css=styles/qt13a.v.1371722622" rel="stylesheet" type="text/css" />



<script type="text/javascript">

function imgFitOnLoad(imgId)
{var maxWidth=720;var img=imgId;var width=img.clientWidth;if(width>maxWidth)
{var sized=maxWidth/width;var height=img.clientHeight*sized;img.width=maxWidth;img.height=height;}}

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-42656244-1']);
  _gaq.push (['_gat._anonymizeIp']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>

</head>

<body>

<div id="topnotice-container"></div>
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]-->

<!--[if lte IE 6]>
<div id="topnotice-padding">
  <div id="topnotice">
	<div class="topnotice-inner">
      <p><strong>Your browser (Internet Explorer 6) is out of date. It has known security flaws and may not display all features of this and other websites.</strong></p>
      <p><a href="http://browser-update.org/update.html" target="_blank">Learn how to update your browser</a>.</p>
	</div>
  </div>
</div>  
<![endif]-->




<div id="qt13a-header">
	<div class="qt13a-gradient">
		<div class="qt13a-container qt13a-dynamicREMOVE">
			<div class="qt13a-sixCol">
				<div id="qt13a-logo"><a class="qt13a-site-logo" href="https://qt-project.org/" title="Qt Project">Logo</a>
				</div><!-- #qt13a-logo -->
				
				<div id="qt13a-title_nav">
					<div id="qt13a-title">
						<p class="qt13a-title"><a href="https://qt-project.org/" title="Qt Project">Qt Project</a></p>
					</div><!-- #qt13a-title -->
					
					<div class="qt13a-nav">
						<ul>
							<li><a href="/downloads">Downloads</a></li>
							<li><a href="/doc">Documentation</a></li>
							<li class="devnet-active"><a href="/forums">Forums</a></li>
							<li><a href="/wiki">Wiki</a></li>
							<li><a href="/groups">Groups</a></li>
							<li><a href="http://planet.qt-project.org/">Blogs</a></li>
							<li><a href="http://showroom.qt-project.org/">Showroom</a></li>
							<li class="qt13a-nav-small 
qt13a-nav-divider-left"><a href="http://qt.io/">Qt.io</a></li>
							
						</ul>
					</div><!-- .qt13a-nav -->
				</div><!-- .qt13a-title_nav-->
			</div><!-- .qt13a-sixCol -->
			
			<div class="qt13a-twoCol qt13a-omega">
				<div id="qt13a-register_search">
					<div id="qt13a-register">
													<a id="id-register-here-link" class="register-here-link" 
							href="/mebmer/register">Register</a>
							<span class="qt13a-link-divider"> | </span>
							<a href="/mebmer/sign-in">Sign in</a>
												<form class='search_form' id="search_form" method='get' action='https://qt-project.org/search'>
							<input type="text" id="search" name="search" class="searchbox qt13a-searchbox" placeholder="Search" value="" />
							<!-- <input type="submit=" value="Search" /> -->
						</form>
					</div><!-- #qt13a-register -->
				</div><!-- #qt13a-register_search -->
			</div><!-- .qt13a-twoCol -->
		</div><!-- .qt13a-container -->
	</div><!-- .qt13a-gradient -->
</div><!-- #qt13a-header -->




<div class="wrapper qt13a-no-bg-img"  >


  <!-- Main content --> 
  <div class="page"> 
    <div class="main col2-right-layout"> 
 


	<div class="col-main-container col-main-container-dynwidth "> 


		
		<div class="col-right sidebar social-enabled">


    
    <div class="socialwrap" id="socialwrap"><a href="#social-icons" class="toggle">Sharing</a></div>


	 <div class="block-square block-square-rating">
			<div class="square-content sidebar-shadow">
			
			<!-- Start tags -->
                <div id="tags">
					<h2>Tags <span><a href="/whatistags">what is this?</a></span> <span id="tagremove"><a title="Undo remove of tag?" id="undotagremovelink" href="#">Undo?</a></span></h2>
                        <div class="tags_list" id="tags_for_52452">
                            <ul>
							
								<li><a id='taglink_18158' class="tag" title="View fft" href="https://qt-project.org/search/tag/fft">fft</a></li>
                            
								<li><a id='taglink_2619' class="tag" title="View qaudiooutput" href="https://qt-project.org/search/tag/qaudiooutput">qaudiooutput</a></li>
                            
								<li><a id='taglink_11034' class="tag" title="View wav" href="https://qt-project.org/search/tag/wav">wav</a></li>
                            
							</ul>
                        </div>
						                </div>
                <!-- End tags -->
				

                <!-- Start rating -->
				<div id="rating">
					<h2>Ratings <span><a href="/whatisratings">what is this?</a></span></h2>
					<ul class="ratebox">
						<li><a href="#" id='rate_count_button' ><span id='current_rating'>0</span></a></li>
					</ul>
					<input type='hidden' id='has_rated' value='n'/>
                    <input type='hidden' id='rate_xid' value='f6dd4b97b52e8a3305ee9439163023b24808ffb2'/>

					
					
						<a href="#loginsidebar" id='rate_button' title="You need to be logged in to rate"><img id='rate_button_img' style="padding-top:17px;" src="/images/qtdn/rate-loggedout.png" alt="" /></a>
					
				</div>
			</div>
    </div>
    <div>




 <div class="block-square block-square-rating forum-sidebar" style="margin-top: 0;">
			<div class="square-content sidebar-shadow">
                <h2>Forum menu</h2>
				<ul class="list">
                	<li><a href="https://qt-project.org/forums/active_topic_search">Active topics</a></li>
                    <li><a href="https://qt-project.org/forums/view_pending_topics">Unanswered posts</a></li>
                	<li><a href="https://qt-project.org/forums/new_topic_search">Posts since last visit</a></li>
					<li><a href="https://qt-project.org/forums/search">Advanced search</a></li>
                </ul>
			</div>
	</div>
        

<!-- If user is logged in -->

  	<!-- Block -->
	<div class="block rounded-sidebar">
			<div class="block-content">
            

            
                <form id="sidebar_login_form" name="secure" method="post" action="https://qt-project.org/"  >
<div class='hiddenFields'>
<input type="hidden" name="XID" value="50c892e75431842f6f50c723b59c51f2565096b1" />
<input type="hidden" name="ACT" value="11" />
<input type="hidden" name="RET" value="https://qt-project.org/forums/viewthread/52452" />
<input type="hidden" name="site_id" value="1" />
</div>


            

				<div class="block-profile">
				  <p class="login" id="loginsidebar">Log in</p>
				<!--  <p class="register"><a 
id="id-register-here-link" 
class="register-here-link" href="/mebmer/register">Register 
here!</a></p> -->
				</div>
				<ul class="form-list">
					<li>
						<label for="id_username_sidebar">Username:</label>
						<div class="input-box input-box-email">
							<input type="text" id="id_username_sidebar" name="username" />
						</div>
					</li>
					<li>
						<label for="id_password_sidebar">Password:</label>
						<div class="input-box input-box-password">
							<input type="password" id="id_password_sidebar" name="password" />
						</div>
					</li>
				</ul>
				<p class="forgot-link"><input id="id_autologin" type='checkbox' name='remember_me' value='1' /><label for="id_autologin"> Keep me logged in for two weeks</label></p>
				<div class="sidecol-links-container">
					<div class="links-left">
						<p class="openid-link"><a href="/mebmer/login">Login 
using OpenID</a></p>
						<p class="forgot-link"><a 
href="/mebmer/forgot_password">Forgot your password?</a></p>
					</div>
					<div class="links-right">
						<button type="submit" class="qtcdk button white">Log in</button>
					</div>
				</div>
			</form>
			</div>
		


    	<!--
    <div class="block-separator"></div>
    <div class="block-content">

      <h2>Qt DevNet Blog</h2>
          
        <h3><a href="https://qt-project.org/blog/view/happy-release-day">Happy Release Day!</a></h3>
        <p class="byline"><a href="/mebmer/7">Alexandra</a> {entry_date 
format='%!'}</p>
        <p> Over here we have a great tradition to...</p>
      
        <h3><a href="https://qt-project.org/blog/view/doc-notes-we-have-a-vision">Doc Notes - We Have a Vision</a></h3>
        <p class="byline"><a href="/mebmer/7">Alexandra</a> {entry_date 
format='%!'}</p>
        <p> Some time ago, when we first started...</p>
      
        <h3><a href="https://qt-project.org/blog/view/new-domain-new-looks-new-features">New domain, new looks, new features</a></h3>
        <p class="byline"><a href="/mebmer/7">Alexandra</a> {entry_date 
format='%!'}</p>
        <p> Phew, we did it. The last weeks have...</p>
      

    </div>
-->
        <div class="block-separator"></div>
    <div class="block-content">
        <h2>Not registered?</h2>
<p>What are you waiting for?<br>Register by clicking the link at the top of the page and start collecting points. It's fun!</p>
    </div>
    


  

  	</div>
    <!-- End Block -->

	</div>


	</div>

<!-- eof sidebar -->

		


	  <!-- Maincol content --> 
      <div class="col-main col-main-rounded col-main-first">


<!-- Breadcrumbs --> 
                <!--[if gt IE 8]><div class="breadwrapper ie9"><![endif]-->
                <!--[if (!IE)|(!IE 9)]><!--><div class="breadwrapper"><!--<![endif]-->
    	<div class="breadcrumbs"> 
        <ul> 
          	<li class="home"> <a href="https://qt-project.org/" title="Go to Home Page">Home</a> </li> 
          	          	
        	<li class="separator">&nbsp;</li><li class="category5"><a href="https://qt-project.org/forums/">Forums</a></li><li class="separator">&nbsp;</li><li class="category5"><a href="https://qt-project.org/forums/viewcategory/38/">International</a></li><li class="separator">&nbsp;</li><li class="category5"><a href="https://qt-project.org/forums/viewforum/33/">Spanish</a></li><li class="separator">&nbsp;</li><li class="product"><strong>QAudioOutput + FFT + wav</strong></li>
        	
			<li class="breadcrumbs-rightcorner">&nbsp;</li>

		</ul>
	</div> 
    </div>
<!-- End Breadcrumbs -->

        <!-- Main Content --> 
        <div class="col-main-wrapper col-main-wrapper-forum" id="id-col-main-wrapper">
		
          <div class="content-view"> 
                
 			  <!-- Content full width --> 
              <div class="main-content-full">



<!-- Forum thread -->
    <div class="forum_post_wrap clearfix">       
                <div class="forum_author_info"> 
            <h4>January 25, 2015</h4> 
            <a href="/mebmer/176097"><img class="" src="https://secure.gravatar.com/avatar/e1214dd827a3e8175dab30545badc347?size=48&amp;default=https%3A%2F%2Fqt-project.org%2Fimages%2Fqtdn%2Fgravatar_empty.png&amp;r=g" 
alt="Federico Perez" height="48" width="48" title=""  /></a>                         
            <a href="/mebmer/176097" title="Federico Perez">Federico Perez</a>
            <div class="forum_author_stats"> 
                Lab Rat<br/>
                <strong>12</strong> posts
            </div>
            <div class="forum_author_badges">
                
            </div>
            <ul class="menu">
                &nbsp;
                
                
                    <li><a href=".">link</a></li>
                
            </ul>
        </div>
              
        <div class="forum_post_body">
      		<h3>QAudioOutput + FFT + wav</h3>
      		
        
        &nbsp;                                              
        
        
        
        
  
  				
					 <p>Hola amigos. La cuestion es que estoy realizando un proyecto que dado un .wav obtener sus datos y realizarle la <span class="caps">FFT</span>. Eso me esta saliendo de maravilla. El problema es a la hora de sincronizar el audio con lo que muestro en pantalla. Le estaba haciendo un .play() normal al audio pero se me desfasa con la <span class="caps">FFT</span> a la hora de representarla. <br />
Recien comence a buscar sobre QAudioOutput, que reproduce el buffer de un audio determinado. Si leo el buffer completo, es decir .readAllI() entonces si lo hace, pero si quiero leer poco a poco, las 1024 muestras que envio a la <span class="caps">FFT</span> sacarlas a la vez por audio, entonces no me sale. El audio me sale entrecortado, no sale continuo. Aqui les dejo el codigo solamente del QAudioOutput.</p>

	<p><div class="cpp-qt geshi"><ol><li class="li1"><div class="de1"><span class="kw4">void</span> MyThread<span class="sy0">::</span><span class="me2">procesarAudio</span><span class="br0">&#40;</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <a href="http://qt-project.org/doc/QFile.html"><span class="kw5">QFile</span></a> audio_file<span class="br0">&#40;</span><span class="st0">&quot;1kHz.wav&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <a href="http://qt-project.org/doc/QByteArray.html"><span class="kw5">QByteArray</span></a> audio_data<span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; QAudioFormat format<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setFrequency</span><span class="br0">&#40;</span><span class="nu0">1000</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setSampleSize</span><span class="br0">&#40;</span><span class="nu0">16</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; format.<span class="me1">setSampleRate</span><span class="br0">&#40;</span><span class="nu0">44100</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setChannelCount</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setCodec</span><span class="br0">&#40;</span><span class="st0">&quot;audio/pcm&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setByteOrder</span><span class="br0">&#40;</span>QAudioFormat<span class="sy0">::</span><span class="me2">LittleEndian</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setSampleType</span><span class="br0">&#40;</span>QAudioFormat<span class="sy0">::</span><span class="me2">SignedInt</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>audio_file.<span class="me1">open</span><span class="br0">&#40;</span><a href="http://qt-project.org/doc/QIODevice.html"><span class="kw5">QIODevice</span></a><span class="sy0">::</span><span class="me2">ReadOnly</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; audio_file.<span class="me1">seek</span><span class="br0">&#40;</span><span class="nu0">44</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// skip wav header</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="kw1">while</span><span class="br0">&#40;</span><span class="br0">&#40;</span>audio_data <span class="sy0">=</span> audio_file.<span class="me1">read</span><span class="br0">&#40;</span><span class="nu0">1024</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">&#41;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://qt-project.org/doc/QBuffer.html"><span class="kw5">QBuffer</span></a><span class="sy0">*</span> audio_buffer <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://qt-project.org/doc/QBuffer.html"><span class="kw5">QBuffer</span></a><span class="br0">&#40;</span><span class="sy0">&amp;</span>audio_data<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">qDebug</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;&lt;</span> audio_buffer<span class="sy0">-&gt;</span><span class="me3">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; audio_buffer<span class="sy0">-&gt;</span><span class="me3">open</span><span class="br0">&#40;</span><a href="http://qt-project.org/doc/QIODevice.html"><span class="kw5">QIODevice</span></a><span class="sy0">::</span><span class="me2">ReadOnly</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; QAudioDeviceInfo info<span class="br0">&#40;</span>QAudioDeviceInfo<span class="sy0">::</span><span class="me2">defaultOutputDevice</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>info.<span class="me1">isFormatSupported</span><span class="br0">&#40;</span>format<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qWarning<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">&lt;&lt;</span><span class="st0">&quot;raw audio format not supported by backend, cannot play audio.&quot;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return<span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; QAudioOutput<span class="sy0">*</span> output <span class="sy0">=</span> <span class="kw1">new</span> QAudioOutput<span class="br0">&#40;</span>info<span class="sy0">,</span> format<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output<span class="sy0">-&gt;</span><span class="me3">start</span><span class="br0">&#40;</span>audio_buffer<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://qt-project.org/doc/QEventLoop.html"><span class="kw5">QEventLoop</span></a> loop<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://qt-project.org/doc/QObject.html"><span class="kw5">QObject</span></a><span class="sy0">::</span><span class="kw2">connect</span><span class="br0">&#40;</span>output<span class="sy0">,</span> SIGNAL<span class="br0">&#40;</span>stateChanged<span class="br0">&#40;</span>QAudio<span class="sy0">::</span><span class="me2">State</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="sy0">&amp;</span>loop<span class="sy0">,</span> SLOT<span class="br0">&#40;</span>quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">&#123;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; loop.<span class="me1">exec</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">&#125;</span> <span class="kw1">while</span><span class="br0">&#40;</span>output<span class="sy0">-&gt;</span><span class="me3">state</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> QAudio<span class="sy0">::</span><span class="me2">ActiveState</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;audio_file.<span class="me1">seek</span><span class="br0">&#40;</span><span class="nu0">1024</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">&#125;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li>
</ol></div></p>
					

						

                

                


                
                                                              
                    </div> 
                  <!-- End Forum thread -->                     
  
<!-- Solution and replies divider: The easy way: -->

	<p class="replies-qty">5 replies</p>
 




	  




	

					<!-- Forum thread replies --> 
					<div class="forum_post_wrap_replies qna-replies clearfix">

            


<!--						<div class="forum_author_info forum_author_info_employee">-->
						<div class="forum_author_info">
                            <h4>January 28, 2015</h4> 
                            <a href="/mebmer/15013"><img class="" src="https://secure.gravatar.com/avatar/124d21ba096c2e2a2e55b58a0979fb47?size=48&amp;default=https%3A%2F%2Fqt-project.org%2Fimages%2Fqtdn%2Fgravatar_empty.png&amp;r=g" 
alt="hipersayan_x" height="48" width="48" title=""  /></a>
                            <a href="/mebmer/15013" title="hipersayan_x">hipersayan_x</a>
    	                    <div class="forum_author_stats"> 
                                
                                    Lab Rat<br/>
                                                                                                                                                                          							
                                <strong>54 </strong>posts
	                        </div> 
                            <div class="forum_author_badges">

                            
                            <ul class="sidebar-badges-list">
                                    
                                    <li>
                                        <a href="http://qt-project.org/badges"><img src="https://qt-project.org/uploads/badges/groupie-l1-v2.png" title="Member of 5 Groups" alt="Groupie L1"></a>
                                    </li>
                                    
                            </ul>
                            
                            </div>
                            <ul class="menu">
                            &nbsp;
                         	
                         		<li><a href="https://qt-project.org/forums/viewreply/217207/">link</a></li>
                         	
	                        
				
						</ul>
                    </div> 
						
                    <div class="forum_post_body_replies"><a name="217207"></a> 
                       <div class="forum_post_body_replies_inner"> 
                            <p>Sinceramente, no entiendo que intentas hacer. </p>

	<p>Por lo que llego a entender de tu código, lo que haces es abrir un archivo <span class="caps">WAV</span>, con cada iteración lees 1024 bytes (sí, bytes, no muestras), ni siquiera estas leyendo las cabeceras del archivo, ni sabes cuantos canales estas reproduciendo, ni la frecuencia de muestreo. </p>

	<p>Luego, por cada muestra que lees, abres una y otra vez QAudioOutput, y ni siquiera desalojas la memoria, con lo que tienes un terrible memory leak.</p>
                            
						</div>
						
						<div class="forum_signature"><fieldset class='signature'>
					
<legend class="signatureTitle">&nbsp;Signature&nbsp;</legend>



<p>&#8220;Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.&#8221;</p>

<p>&#8220;Finibus Bonorum Et Malorum&#8221;, Cicerón</p>

</fieldset></div>
						

                        

                        

					</div>
				</div> 
                <!-- End Forum thread replies --> 
			
			  




	

					<!-- Forum thread replies --> 
					<div class="forum_post_wrap_replies qna-replies clearfix">

            


<!--						<div class="forum_author_info forum_author_info_employee">-->
						<div class="forum_author_info">
                            <h4>February 6, 2015</h4> 
                            <a href="/mebmer/176097"><img class="" src="https://secure.gravatar.com/avatar/e1214dd827a3e8175dab30545badc347?size=48&amp;default=https%3A%2F%2Fqt-project.org%2Fimages%2Fqtdn%2Fgravatar_empty.png&amp;r=g" 
alt="Federico Perez" height="48" width="48" title=""  /></a>
                            <a href="/mebmer/176097" title="Federico Perez">Federico Perez</a>
    	                    <div class="forum_author_stats"> 
                                
                                    Lab Rat<br/>
                                                                                                                                                                          							
                                <strong>12 </strong>posts
	                        </div> 
                            <div class="forum_author_badges">

                            
                            </div>
                            <ul class="menu">
                            &nbsp;
                         	
                         		<li><a href="https://qt-project.org/forums/viewreply/218830/">link</a></li>
                         	
	                        
				
						</ul>
                    </div> 
						
                    <div class="forum_post_body_replies"><a name="218830"></a> 
                       <div class="forum_post_body_replies_inner"> 
                            <p>Gracias por responder amigo, habia estado un tiempo fuera, por eso mi demora en volver a responder. Sorry.</p>

	<p>Mira, lo que quiero hacer es lo siguiente, estoy desarrollando un proyecto de la <span class="caps">FFT</span>. Yo leo un .wav y cada 1024 bytes los envio a la <span class="caps">FFT</span> y me da un resultado, el cual muestro en pantalla de forma grafica en el espectro de frecuencia. A la hora de sincronizar el audio de ese .wav con lo que muestro en pantalla es el problema, debido a que si le digo sin mas audio-&gt;play(); pues en ocasiones sale sincronizado, pero cuando el fichero de audio es muy grande, el audio se discordina respecto a lo que estoy viendo en pantalla.</p>

	<p>Por eso la idea de cada vez que lea 1024 bytes de ese .wav, y se los pase a la <span class="caps">FFT</span>, pues tambien los pase a la tarjeta de sonido de la PC y lo reproduzca, por lo que quedaria sincronizado.</p>

	<p>El codigo de arriba, los valores puestos en el format, son los mismos del .wav que tengo por defecto. Estan puesto estaticos, pero son esos mismos parametros los que tiene el audio que estoy leyendo.</p>

	<p>Un saludo y en espera de respuesta.<br />
Gracias por contestar.</p>
                            
						</div>
						

                        

                        

					</div>
				</div> 
                <!-- End Forum thread replies --> 
			
			  




	

					<!-- Forum thread replies --> 
					<div class="forum_post_wrap_replies qna-replies clearfix">

            


<!--						<div class="forum_author_info forum_author_info_employee">-->
						<div class="forum_author_info">
                            <h4>February 6, 2015</h4> 
                            <a href="/mebmer/15013"><img class="" src="https://secure.gravatar.com/avatar/124d21ba096c2e2a2e55b58a0979fb47?size=48&amp;default=https%3A%2F%2Fqt-project.org%2Fimages%2Fqtdn%2Fgravatar_empty.png&amp;r=g" 
alt="hipersayan_x" height="48" width="48" title=""  /></a>
                            <a href="/mebmer/15013" title="hipersayan_x">hipersayan_x</a>
    	                    <div class="forum_author_stats"> 
                                
                                    Lab Rat<br/>
                                                                                                                                                                          							
                                <strong>54 </strong>posts
	                        </div> 
                            <div class="forum_author_badges">

                            
                            <ul class="sidebar-badges-list">
                                    
                                    <li>
                                        <a href="http://qt-project.org/badges"><img src="https://qt-project.org/uploads/badges/groupie-l1-v2.png" title="Member of 5 Groups" alt="Groupie L1"></a>
                                    </li>
                                    
                            </ul>
                            
                            </div>
                            <ul class="menu">
                            &nbsp;
                         	
                         		<li><a href="https://qt-project.org/forums/viewreply/218871/">link</a></li>
                         	
	                        
				
						</ul>
                    </div> 
						
                    <div class="forum_post_body_replies"><a name="218871"></a> 
                       <div class="forum_post_body_replies_inner"> 
                            <blockquote><div class="forum_post_quote_author"><strong>Federico Perez</strong> wrote:</div>
Mira, lo que quiero hacer es lo siguiente, estoy desarrollando un proyecto de la <span class="caps">FFT</span>. Yo leo un .wav y cada 1024 bytes los envio a la <span class="caps">FFT</span> y me da un resultado, 
</blockquote>

	<p>No me estas entendiendo, los archivos wav tienen formato, no se pueden leen por &#8220;bytes&#8221;, primero se debe leer la cabecera y luego extraer la data. Aquí te dejo las <a href="http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/WAVE.html">especificaciones del formato</a> <em>[mmsp.ece.mcgill.ca]</em>.</p>

	<p><a href="http://doc.qt.io/qt-5/qaudiooutput.html">QAudioOutput</a> <em>[doc.qt.io]</em> solo procesa audio en bruto, no archivos con formato. <a href="http://doc.qt.io/qt-5/qfile.html">QFile</a> <em>[doc.qt.io]</em> tampoco lee formatos, solo sabe que le estas pasando un archivo, pero no sabe como esta compuesto ese archivo.</p>

	<p><blockquote><div class="forum_post_quote_author"><strong>Federico Perez</strong> wrote:</div><br />
pues en ocasiones sale sincronizado, pero cuando el fichero de audio es muy grande, el audio se discordina respecto a lo que estoy viendo en pantalla.</p>

	<p>Por eso la idea de cada vez que lea 1024 bytes de ese .wav, y se los pase a la <span class="caps">FFT</span>, pues tambien los pase a la tarjeta de sonido de la PC y lo reproduzca, por lo que quedaria sincronizado.<br />
</blockquote></p>

	<p>Se discordina por que estas abriendo QOutput cada vez, y por que estas leyendo mal el formato.</p>

<blockquote><div class="forum_post_quote_author"><strong>Federico Perez</strong> wrote:</div>
El codigo de arriba, los valores puestos en el format, son los mismos del .wav que tengo por defecto. Estan puesto estaticos, pero son esos mismos parametros los que tiene el audio que estoy leyendo.
</blockquote>

	<p>No, están mal, por ejemplo:</p>

	<p><div class="cpp-qt geshi"><ol><li class="li1"><div class="de1">format.<span class="me1">setSampleSize</span><span class="br0">&#40;</span><span class="nu0">16</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
</ol></div></p>

	<p>aquí le estas diciendo que vas a reproducir muestras de 2 bytes, y le estas pasando data de 1 byte.</p>
                            
						</div>
						
						<div class="forum_signature"><fieldset class='signature'>
					
<legend class="signatureTitle">&nbsp;Signature&nbsp;</legend>



<p>&#8220;Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.&#8221;</p>

<p>&#8220;Finibus Bonorum Et Malorum&#8221;, Cicerón</p>

</fieldset></div>
						

                        

                        

					</div>
				</div> 
                <!-- End Forum thread replies --> 
			
			  




	

					<!-- Forum thread replies --> 
					<div class="forum_post_wrap_replies qna-replies clearfix">

            


<!--						<div class="forum_author_info forum_author_info_employee">-->
						<div class="forum_author_info">
                            <h4>February 6, 2015</h4> 
                            <a href="/mebmer/15013"><img class="" src="https://secure.gravatar.com/avatar/124d21ba096c2e2a2e55b58a0979fb47?size=48&amp;default=https%3A%2F%2Fqt-project.org%2Fimages%2Fqtdn%2Fgravatar_empty.png&amp;r=g" 
alt="hipersayan_x" height="48" width="48" title=""  /></a>
                            <a href="/mebmer/15013" title="hipersayan_x">hipersayan_x</a>
    	                    <div class="forum_author_stats"> 
                                
                                    Lab Rat<br/>
                                                                                                                                                                          							
                                <strong>54 </strong>posts
	                        </div> 
                            <div class="forum_author_badges">

                            
                            <ul class="sidebar-badges-list">
                                    
                                    <li>
                                        <a href="http://qt-project.org/badges"><img src="https://qt-project.org/uploads/badges/groupie-l1-v2.png" title="Member of 5 Groups" alt="Groupie L1"></a>
                                    </li>
                                    
                            </ul>
                            
                            </div>
                            <ul class="menu">
                            &nbsp;
                         	
                         		<li><a href="https://qt-project.org/forums/viewreply/219092/">link</a></li>
                         	
	                        
				
						</ul>
                    </div> 
						
                    <div class="forum_post_body_replies"><a name="219092"></a> 
                       <div class="forum_post_body_replies_inner"> 
                            <p>Agh! no me dí cuenta de esto:</p>

	<p><div class="cpp-qt geshi"><ol><li class="li1"><div class="de1">audio_file.<span class="me1">seek</span><span class="br0">&#40;</span><span class="nu0">44</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
</ol></div></p>

	<p>perdón, de cualquier forma, revisa lo de <strong>format.setSampleSize</strong> y lo de QAudioOutput</p>
                            
						</div>
						
						<div class="forum_signature"><fieldset class='signature'>
					
<legend class="signatureTitle">&nbsp;Signature&nbsp;</legend>



<p>&#8220;Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.&#8221;</p>

<p>&#8220;Finibus Bonorum Et Malorum&#8221;, Cicerón</p>

</fieldset></div>
						

                        

                        

					</div>
				</div> 
                <!-- End Forum thread replies --> 
			
			  




	

					<!-- Forum thread replies --> 
					<div class="forum_post_wrap_replies qna-replies clearfix">

            


<!--						<div class="forum_author_info forum_author_info_employee">-->
						<div class="forum_author_info">
                            <h4>February 7, 2015</h4> 
                            <a href="/mebmer/176097"><img class="" src="https://secure.gravatar.com/avatar/e1214dd827a3e8175dab30545badc347?size=48&amp;default=https%3A%2F%2Fqt-project.org%2Fimages%2Fqtdn%2Fgravatar_empty.png&amp;r=g" 
alt="Federico Perez" height="48" width="48" title=""  /></a>
                            <a href="/mebmer/176097" title="Federico Perez">Federico Perez</a>
    	                    <div class="forum_author_stats"> 
                                
                                    Lab Rat<br/>
                                                                                                                                                                          							
                                <strong>12 </strong>posts
	                        </div> 
                            <div class="forum_author_badges">

                            
                            </div>
                            <ul class="menu">
                            &nbsp;
                         	
                         		<li><a href="https://qt-project.org/forums/viewreply/219265/">link</a></li>
                         	
	                        
				
						</ul>
                    </div> 
						
                    <div class="forum_post_body_replies"><a name="219265"></a> 
                       <div class="forum_post_body_replies_inner"> 
                            <p><div class="cpp-qt geshi"><ol><li class="li1"><div class="de1"><span class="kw4">void</span> MyThread<span class="sy0">::</span><span class="me2">procesarAudio</span><span class="br0">&#40;</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw4">FILE</span> <span class="sy0">*</span> fp <span class="sy0">=</span> <span class="kw3">fopen</span><span class="br0">&#40;</span><span class="st0">&quot;1kHz.wav&quot;</span><span class="sy0">,</span><span class="st0">&quot;rb&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw4">char</span> type<span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw4">int</span> sample_rat<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw4">int</span> size<span class="sy0">,</span> chunkSize<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw4">short</span> formatType<span class="sy0">,</span> channels<span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw4">int</span> avgBytesPerSec<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw4">short</span> bytesPerSample<span class="sy0">,</span> bitsPerSample<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw4">int</span> dataSize<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span>type<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>size<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span>type<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span>type<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>chunkSize<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>formatType<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">short</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>channels<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">short</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>sample_rat<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>avgBytesPerSec<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>bytesPerSample<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">short</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>bitsPerSample<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">short</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span>type<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">fread</span><span class="br0">&#40;</span><span class="sy0">&amp;</span>dataSize<span class="sy0">,</span> <span class="kw3">sizeof</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> fp<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <a href="http://qt-project.org/doc/QFile.html"><span class="kw5">QFile</span></a> audio_file<span class="br0">&#40;</span><span class="st0">&quot;1kHz.wav&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <a href="http://qt-project.org/doc/QByteArray.html"><span class="kw5">QByteArray</span></a> audio_data<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; QAudioFormat format<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setFrequency</span><span class="br0">&#40;</span><span class="nu0">1000</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setSampleSize</span><span class="br0">&#40;</span><span class="nu0">16</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setSampleRate</span><span class="br0">&#40;</span><span class="nu0">44100</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; format.<span class="me1">setChannelCount</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setCodec</span><span class="br0">&#40;</span><span class="st0">&quot;audio/pcm&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setByteOrder</span><span class="br0">&#40;</span>QAudioFormat<span class="sy0">::</span><span class="me2">LittleEndian</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; format.<span class="me1">setSampleType</span><span class="br0">&#40;</span>QAudioFormat<span class="sy0">::</span><span class="me2">SignedInt</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; QAudioDeviceInfo info<span class="br0">&#40;</span>QAudioDeviceInfo<span class="sy0">::</span><span class="me2">defaultOutputDevice</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>info.<span class="me1">isFormatSupported</span><span class="br0">&#40;</span>format<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; qWarning<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">&lt;&lt;</span><span class="st0">&quot;raw audio format not supported by backend, cannot play audio.&quot;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; return<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">&#125;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; QAudioOutput<span class="sy0">*</span> output <span class="sy0">=</span> <span class="kw1">new</span> QAudioOutput<span class="br0">&#40;</span>info<span class="sy0">,</span> format<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <a href="http://qt-project.org/doc/QEventLoop.html"><span class="kw5">QEventLoop</span></a> loop<span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>audio_file.<span class="me1">open</span><span class="br0">&#40;</span><a href="http://qt-project.org/doc/QIODevice.html"><span class="kw5">QIODevice</span></a><span class="sy0">::</span><span class="me2">ReadOnly</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; audio_file.<span class="me1">seek</span><span class="br0">&#40;</span><span class="nu0">44</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// skip wav header</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="kw1">while</span><span class="br0">&#40;</span><span class="br0">&#40;</span>audio_data <span class="sy0">=</span> audio_file.<span class="me1">read</span><span class="br0">&#40;</span><span class="nu0">1024</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">&#41;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">// audio_file.close();</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://qt-project.org/doc/QBuffer.html"><span class="kw5">QBuffer</span></a><span class="sy0">*</span> audio_buffer <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://qt-project.org/doc/QBuffer.html"><span class="kw5">QBuffer</span></a><span class="br0">&#40;</span><span class="sy0">&amp;</span>audio_data<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">qDebug</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&lt;&lt;</span> audio_buffer<span class="sy0">-&gt;</span><span class="me3">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; audio_buffer<span class="sy0">-&gt;</span><span class="me3">open</span><span class="br0">&#40;</span><a href="http://qt-project.org/doc/QIODevice.html"><span class="kw5">QIODevice</span></a><span class="sy0">::</span><span class="me2">ReadOnly</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output<span class="sy0">-&gt;</span><span class="me3">start</span><span class="br0">&#40;</span>audio_buffer<span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://qt-project.org/doc/QObject.html"><span class="kw5">QObject</span></a><span class="sy0">::</span><span class="kw2">connect</span><span class="br0">&#40;</span>output<span class="sy0">,</span> SIGNAL<span class="br0">&#40;</span>stateChanged<span class="br0">&#40;</span>QAudio<span class="sy0">::</span><span class="me2">State</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="sy0">&amp;</span>loop<span class="sy0">,</span> SLOT<span class="br0">&#40;</span>quit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw1">do</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">&#123;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; loop.<span class="me1">exec</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">&#125;</span> <span class="kw1">while</span><span class="br0">&#40;</span>output<span class="sy0">-&gt;</span><span class="me3">state</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> QAudio<span class="sy0">::</span><span class="me2">ActiveState</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;audio_file.<span class="me1">seek</span><span class="br0">&#40;</span><span class="nu0">1024</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">&#125;</span></div></li>
<li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li>
</ol></div></p>

	<p>Al inicio del codigo puedes ver como leo todo el encabezado del .wav, eso funciona a las mil maravillas, por eso se los datos de ese fichero en especifico y los pongo de forma estatica en format.<br />
Si deseas puedo subir el codigo fuente del proyecto, tambien el del proyecto completo de la <span class="caps">FFT</span> para que veas de primera mano el problema que presento</p>

	<p>saludos y gracias por responder.</p>
                            
						</div>
						

                        

                        

					</div>
				</div> 
                <!-- End Forum thread replies --> 
			
			 
        
        &nbsp;
    
    </div> 

&nbsp;


&lsaquo;&lsaquo; <a class="medium" href="https://qt-project.org/forums/viewthread/52382/">Problema al compilar qxmpp</a> 



&nbsp;&nbsp;&nbsp;&nbsp; <a class="medium" href="https://qt-project.org/forums/viewthread/52718/">funcion para agregar una imagen</a> &rsaquo;&rsaquo;



	<p class="not_loggedin">You must <a class="medium" href="/mebmer/login">log in</a> to post 
a reply. Not a member yet? <a class="medium" href="/mebmer/register">Register here!</a></p>





                    
                </div>
  <!-- End Content full width-->
  <div class="clearfix">&nbsp;</div>

  </div>

</div>
<!-- End Main Content -->

   
   
  

  </div>
  <!-- End Maincol content-->
   </div>


                    

    
</div>
 </div>

 <!-- Footer -->
 <div class="footer-wrapper">

   <div id="qt13a-footer">
	<div class="qt13a-gradient">
		<div class="qt13a-shadow">
			<div class="qt13a-container">
				<ul class="qt13a-first">
					<li class="qt13a-title"><a href="http://qt.io/product/">Qt Info</a></li>
					<li><a href="/downloads">Downloads</a></li>
					<li><a href="http://qt.io/product/">Features &amp; benefits</a></li>
					<li><a href="/doc">Learning Qt</a></li>
					<li><a href="http://www.qt.io/partners/">Partnering</a></li>
					<li><a href="/contact">Contact us</a></li>
				</ul>
				<ul>
					<li class="qt13a-title">Tasks</li>
					<li><a href="http://qt.io/download/">Purchasing Qt</a></li>
					<li><a href="http://bugreports.qt-project.org/">Bug reporting</a></li>
					<li><a href="http://codereview.qt-project.org">Code review</a></li>
					<li><a href="http://qt.gitorious.org/">Qt repositories (read-only)</a></li>
				</ul>

				<ul>
					<li class="qt13a-title"><a href="#">Activity</a></li>
					<li><a href="http://planet.qt-project.org">Developer Blogs</a></li>
					<li><a href="/repostingguidelines">Reposting Guidelines </a></li>
					<li><a href="/meetups">Events</a></li>
				</ul>
				<ul class="qt13a-last">
					<li class="qt13a-title">Follow Us</li>
					<li><a class="qt13a-some-icon qt13a-icon-facebook" href="https://www.facebook.com/qtbydigia">Facebook</a> <a class="qt13a-some-icon qt13a-icon-twitter" href="http://twitter.com/qtproject">Qt on Twitter</a> <a class="qt13a-some-icon qt13a-icon-linkedin" href="http://www.linkedin.com/groupInvitation?groupID=1531497">LinkedIn</a> <a class="qt13a-some-icon qt13a-icon-youtube" href="http://www.youtube.com/user/QtStudios">Youtube</a></li>
<li><br /><a class="addthis_button" href="http://www.addthis.com/bookmark.php?v=300&amp;pubid=xa-51af2c3d268c8944"><img src="http://s7.addthis.com/static/btn/v2/lg-share-en.gif" width="125" height="16" alt="Bookmark and Share" style="border:0"/></a>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-51af2c3d268c8944"></script></li>					
				</ul>
			</div><!-- .footer-container -->
		</div><!-- .footer-shadow -->
	</div><!-- .footer-gradient -->
	
	<div class="qt13a-copyright" id="copyright">
		<div class="qt13a-container">
		<p>&copy; 2014 Qt Project Hosting. Qt&reg; and the Qt logo is a registered trade mark of Digia plc and/or its subsidiaries and is used pursuant to a license from Digia plc and/or its subsidiaries.</p>
		<p>All other trademarks are property of their respective owners. <a href="http://en.gitorious.org/privacy_policy/">Privacy Policy</a></p>
		<p>This site is hosted by <a href="http://gitorious.org">Gitorious AS.</a> Your use of this web site is governed by <a href="http://en.gitorious.org/tos/">these terms of service.</a></p>
		<p>Qt Project Hosting, P.O. Box 4332 Nydalen, 0402 Oslo, Norway. Org. Nr. 997 447 913</p>
		</div>
	</div><!-- .qt13a-copyright -->
</div><!-- #qt13a-footer -->

   <!-- End footer -->

 </div>
   </div>

   <script type="text/javascript" src="https://www.google.com/jsapi?key=ABQIAAAAStHvL1ogS5TsEAbku2fKgRSSkxkxkJzaa0n-EILC4hplfqEYTxSsnIUjBF0EGn9ngjkcMd2sVXO4IA"></script>

   <script type="text/javascript">
//<![CDATA[

 function searchStart(){$('.gsc-tabHeader:first').html("Qt Project");}

 google.load("jquery", "1.7.0");
 google.load("jqueryui", "1.8.16");

 var langObj = new Object();
 langObj.language = 'en';
 google.load('search', '1', langObj);


   var root_url = 'https://qt-project.org/';
   var path_site_index = 'https://qt-project.org/';
   var wiki_url = 'https://qt-project.org/wiki/';
   var notediff_url = root_url+'ajax/note_revision/';
   var js_ending = '0512201215101354716658-min.js';

   var ajax_userpoints_url = root_url+'ajax/userpoints';
   var registration_form_url = root_url+'embeds/registration_form_ajax';
   var valid_username_check_url = path_site_index+'?ACT=30' + String.fromCharCode(38) + 'method=username_available';
   var valid_email_check_url = path_site_index+'?ACT=30' + String.fromCharCode(38) + 'method=check_email';
   var validate_captcha_url = path_site_index+'?ACT=31';
   var get_url_title_url = root_url+'ajax/answers/get_url_title';
   var elearning_embed_browse_url = root_url + 'videos/embed_browse/';
   var recaptcha_key = '6LcbOM4SAAAAAL_DAiy3oQJd0qXuiBSac3ec22Re';
   var tag_separator = 'comma';
   var aid_delete_tag = '36';
   var aid_tag_entry = '40';
   var aid_most_popular_tags = '41';
   var aid_insert_tags = '34';
   var aid_report_content = '44';
   var aid_groups_remove_member = '89';
   var aid_groups_toggle_owner = '83';
   var aid_groups_ban_member = '81';
   var aid_groups_unban_member = '82';
   var aid_docmark_add = '102';
   var aid_docmark_remove = '103';
   var aid_groups_handle_join_request = '77';
   var aid_extended_ee_ajax_search = '139';
   var aid_doc_note_edit = '106';
   var aid_doc_get_page_info = '104';

   var aid_doc_note_revisions = '114';

   var aid_add_doc_note_rating = '108';
   var aid_doc_note_report = '109';

   var aid_acronymlist = '100';
   var aid_acronyminfo = '101';

   var aid_extended_wiki_tags_revision_data = '113';
   var aid_tag_autocomplete = '42';

   var tag_search_url = root_url+'search/tag/';
   var bulletin_url = root_url+'ajax/bulletin/';
   var wikidiff_url = root_url+'ajax/wikidiff/';

    var magical_xid = '3d57252c3f953223b7a90cbbdff451bac40865d5';
    var current_segment_1 = 'forums';
    var current_segment_2 = 'viewthread';
    var current_segment_3 = '52452';

   var comment_edit_url = 'https://qt-project.org/?ACT=50';
   var aid_search_autocomplete = '110';

function loadTheJs()
{
    var loadjs = [];

       var section_js = ['forums','doc','tags','videos','groups','resources'];
       if(current_segment_1 == '') {
       	   loadjs.push('videos');
           loadjs.push('frontpage');
       } else if($.inArray(current_segment_1, section_js) > -1) {loadjs.push(current_segment_1);}

        if(current_segment_1 == 'wiki' || current_segment_2 == 'note_revisions' || current_segment_3 == 'wiki')
        {loadjs.push('wiki');}

        var qtjs;
        for(i=0; i < loadjs.length; i++) {
            qtjs = document.createElement('script');
            qtjs.src = ('/static/js/qtdn/'+loadjs[i]+'0512201215101354716658-min.js');
            qtjs.setAttribute('async', 'true');
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(qtjs);
        }
}

 google.setOnLoadCallback(function() {

     var globaljs = document.createElement('script');
     globaljs.src = ('/static/js/qtdn/global0512201215101354716658-min.js');
     globaljs.setAttribute('async', 'true');
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(globaljs);

  var customSearchControl = new google.search.CustomSearchControl('013036423049789562530:e47vwa__czi');
	    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	    customSearchControl.setSearchStartingCallback(this, searchStart);
        var options = new google.search.DrawOptions();
        options.setAutoComplete(true);
        customSearchControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
        customSearchControl.draw('cse', options);


 });
//]]>
   </script>

   <script type="text/javascript" src="/static/js/qtdn/fancybox0512201215101354716658-min.js"></script>


   <div id="report-link-dialog" title="Report content" >

   <div style="display: none;" class="report-link-dialog-loading"></div>

   <div class="report-link-dialog-content">
   <p>You are about to flag this item as unappropriate.</p>
   <form id='report-content-form' action='/'>
       <div>
       <input id="report_content_type" name="report_content_type" type="hidden" value=""/>
       <input id="report_content_id" name="report_content_id" type="hidden" value="test"/>
       <input id="report_content_url" name="report_content_url" type="hidden" value=""/>
       <textarea name="report_content_comment" id="report_content_comment" rows="5" cols="20"></textarea>
       </div>
   </form>
   </div>
   </div>


   </body>
   </html>

